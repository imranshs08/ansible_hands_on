---
- name: Deploy a Web Server on RedHat Systems
  hosts: centos
  become: yes
  tasks: 
    - name: Install httpd server
      ansible.builtin.package:
        name: httpd
        state: latest

    - name: Custom index.html
      ansible.builtin.copy:
        dest: /var/www/html/index.html
        content: |
          Custom Web Page generated by Ansible

    - name: Enable HTTPD Server
      ansible.builtin.service:
        name: httpd
        state: started
        enabled: yes

    - name: Start and Enable Firewalld Service
      ansible.builtin.service:
        name: firewalld
        state: started
        enabled: yes


    - name: open firewall
      ansible.posix.firewalld:
        service: http
        state: enabled
        immediate: true
        permanent: true
     
